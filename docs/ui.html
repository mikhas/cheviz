---

title: cheviz ui

keywords: fastai
sidebar: home_sidebar



---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 02_ui.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>future</strong> is needed for interactive widgets, has to be imported before everything else.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">%</span><span class="k">load_ext</span> autoreload
<span class="o">%</span><span class="k">autoreload</span> 2
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can use interactive widgets with Jupyter for our minimal UI.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">x</span><span class="p">:</span><span class="nb">int</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    
<span class="n">interact</span><span class="p">(</span><span class="n">fun</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




 
 
<div id="63da8306-3058-4380-83d1-81c3e06f39e9"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#63da8306-3058-4380-83d1-81c3e06f39e9');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "a5d642aab2a4464282a84aba6efeb878", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;function __main__.fun(x:int)&gt;</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">games</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">games</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">fetch</span><span class="p">()[</span><span class="s1">&#39;Candidates_1953.pgn&#39;</span><span class="p">]))</span>
<span class="n">games_slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span><span class="nb">min</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="nb">max</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">games</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">widgets</span><span class="o">.</span><span class="n">interactive</span><span class="p">(</span><span class="k">lambda</span> <span class="n">game_id</span><span class="p">:</span> <span class="nb">print</span><span class="p">(</span><span class="n">games</span><span class="p">[</span><span class="n">game_id</span><span class="p">]),</span> <span class="n">game_id</span><span class="o">=</span><span class="n">games_slider</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




 
 
<div id="68176f1f-35fe-4b3f-9526-caa4767658f7"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#68176f1f-35fe-4b3f-9526-caa4767658f7');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "228415f49ccb4ab99c9867ba890b1d9d", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>OK, perhaps we can build a simple chess game replay UI?</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="showGameUi" class="doc_header"><code>showGameUi</code><a href="https://github.com/mikhas/cheviz/tree/master/cheviz/ui.py#L14" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>showGameUi</code>(<strong><code>games</code></strong>:<code>list</code>, <strong><code>games_id</code></strong>:<code>int</code>=<em><code>0</code></em>, <strong><code>move</code></strong>:<code>int</code>=<em><code>0</code></em>, <strong><code>echo</code></strong>:<code>int</code>=<em><code>1</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>For each UI element that controls input (here: our 3 sliders) we need a function to act as callback for the widget. Because I want those functions to implicitly share <em>some</em> state and yet not be visible as surface API of the ui module, I have chosen to nest those functions instead. Both showGameUi(...) and gameUi(...) act as closures. Since applyMoves(...) takes two arguments it receives input from two sliders (moves_slider, echo_slider). Analogous to applyMoves(...), gameUi(...) takes three arguments. The metric and square filter drop-down list both store/select function pointers.</p>
<p>A rather complex part of the code deals with a typical problem in chess: We have two sides, with alternating moves between them. At move 1, white made its first move and it's black's turn. Once black moves, white is an extra half move away from its initial position, without having moved itself. A move echo larger than 1 makes this issue clearly visible for instance. Our move selection mechanism (here: a Python range) needs to reflect that issue, hence the need for adjusted_{wm, bm} variables. One can discuss whether it might be cleaner to have two separate move stacks, one for each side, simply to avoid mis-steps wrt. move selection when in between moves.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">showGameUi</span><span class="p">(</span><span class="n">games</span><span class="p">,</span> <span class="n">games_id</span><span class="o">=</span><span class="mi">57</span><span class="p">,</span> <span class="n">move</span><span class="o">=</span><span class="mi">23</span><span class="p">,</span> <span class="n">echo</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">




 
 
<div id="69dd3f9d-e1db-457e-a922-92bef8330cc9"></div>
<div class="output_subarea output_widget_view ">
<script type="text/javascript">
var element = $('#69dd3f9d-e1db-457e-a922-92bef8330cc9');
</script>
<script type="application/vnd.jupyter.widget-view+json">
{"model_id": "fe2c09bf0ff4476293e4540fc326d40f", "version_major": 2, "version_minor": 0}
</script>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can override the CSS for IPython's display function so that we can show multiple elements next to each other.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span><span class="p">,</span> <span class="n">HTML</span>

<span class="n">CSS</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">.output {</span>
<span class="s2">    flex-direction: row;</span>
<span class="s2">    flex-wrap: wrap;</span>
<span class="s2">}</span>
<span class="s2">&quot;&quot;&quot;</span>

<span class="n">HTML</span><span class="p">(</span><span class="s1">&#39;&lt;style&gt;</span><span class="si">{}</span><span class="s1">&lt;/style&gt;&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">CSS</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_html rendered_html output_subarea output_execute_result">
<style>
.output {
    flex-direction: row;
    flex-wrap: wrap;
}
</style>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

