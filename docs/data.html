---

title: cheviz data

keywords: fastai
sidebar: home_sidebar

summary: "API details."
description: "API details."
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: 01_data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We create a data directory and fetch some annotated PGNs of top tier chess tournaments.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>mkdir -p data
<span class="o">!</span>ls
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>00_core.ipynb  CONTRIBUTING.md	index.ipynb  MANIFEST.in       settings.ini
01_data.ipynb  data		LICENSE      README.md	       setup.py
cheviz	       docs		Makefile     requirements.txt
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>In Jupyter there is that nice <code>!some shell command</code> escape hatch that would allow us to simply use <code>curl</code> or <code>wget</code>. However, we cannot use the escape hatch in code we want to export as a module. So we use urllib and shutil instead. Because of Python's <code>with ... as ...</code> pattern this produces unexpectedly elegant code (which I didn't come up with myself but found on <a href="https://stackoverflow.com/questions/7243750/download-file-from-web-in-python-3/7244263#7244263">stack overflow, obviously</a>).</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="fetch" class="doc_header"><code>fetch</code><a href="https://github.com/fastai/cheviz/tree/master/cheviz/data.py#L10" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>fetch</code>()</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">fetch</span><span class="p">()</span>
<span class="o">!</span>ls data
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Baden2019.pgn	     Shamkir2019.pgn	 WorldChamp_1986_to_2018.pgn
Candidates_1953.pgn  WijkaanZee2019.pgn
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="o">!</span>du -sh data
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>756K	data
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Now that we downloaded our chess games, we wrap the chess.pgn parser in a generator. Notice that a single PGN file can contain multiple chess games, as is the case with our tournament archives.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="games" class="doc_header"><code>games</code><a href="https://github.com/fastai/cheviz/tree/master/cheviz/data.py#L30" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>games</code>(<strong><code>pgn_name</code></strong>:<code>str</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>On my machine, it takes roughly a second to parse all games of the 1953 world championship candidate tournament. This is probably slow considering the PGN file has a size of only 120kb. As data scientists we learn to ignore what could otherwise annoy us as software engineers â€“ after all, we need automated insights, not a fast PGN parser.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">pgn</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;Candidates_1953.pgn&#39;</span>

<span class="o">%</span><span class="k">time</span> pgn[key] = list(games(data[key]))   
<span class="n">board</span><span class="p">,</span> <span class="n">moves</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="n">pgn</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="n">board</span><span class="p">,</span> <span class="n">moves</span><span class="p">,</span> <span class="n">header</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>CPU times: user 793 ms, sys: 19.3 ms, total: 812 ms
Wall time: 813 ms
</pre>
</div>
</div>

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(Board(&#39;rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1&#39;),
 &lt;Mainline at 0x7fd7a37071d0 (1. c4 Nf6 2. g3 e6 3. Bg2 d5 4. d4 dxc4 5. Qa4+ Nbd7 6. Nf3 a6 7. Qxc4 b5 8. Qc6 Rb8 9. Bf4 Nd5 10. Bg5 Be7 11. Bxe7 Qxe7 12. O-O Bb7 13. Qc2 c5 14. dxc5 Nxc5 15. Rc1 Rc8 16. Nc3 Nf6 17. b4 Na4 18. Qb3 Nxc3 19. Rxc3 Rxc3 20. Qxc3 O-O 21. Rc1 Rd8 22. a3 Nd5 23. Qd4 f6 24. Ne1 e5 25. Qc5 Qxc5 26. bxc5 Bc6 27. Rd1 Rd7 28. Bh3 Re7 29. Nc2 a5 30. Bg2 Rd7 31. Bh3 Re7 32. Kf1 Kf7 33. Ke1 Rc7 34. Rd3 Bb7 35. Ne3 Rxc5 36. Nf5 Bc6 37. Nd6+ Kf8 38. Bg2 g6 39. Kd2 Ke7 40. Ne4 Rc4 41. f3 f5 42. Nf2 Ra4 43. Nd1 e4 44. fxe4 fxe4 45. Rb3 Rd4+ 46. Kc1 b4 47. Ne3 Nc3 48. axb4 Nxe2+ 49. Kb1 Ba4 50. Rb2 Nc3+ 51. Kc1 axb4 52. Rd2 Rxd2 53. Kxd2 Kd6 54. Ng4 Kc5 55. h4 Kd4 56. h5 gxh5 57. Ne3 Nb1+ 58. Ke2 Bb5+ 59. Kf2 b3)&gt;,
 Headers(Event=&#39;ct&#39;, Site=&#39;Zurich&#39;, Date=&#39;1953.??.??&#39;, Round=&#39;01&#39;, White=&#39;Szabo L&#39;, Black=&#39;Geller E&#39;, Result=&#39;0-1&#39;))</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">type</span><span class="p">(</span><span class="n">board</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">moves</span><span class="p">),</span> <span class="nb">type</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(chess.Board, chess.pgn.Mainline, chess.pgn.Headers)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Our PGN archive has been parsed into a list of games, grouped by tournament. Each game is represented by a tuple, <code>(chess.Board, chess.pgn.Mainline, chess.pgn.Headers)</code>. The game meta data is stored in <code>chess.pgn.Headers</code>,  following the Seven Tag Roster scheme, or STR. <code>chess.Board</code> contains the current position, <code>chess.pgn.Mainline</code> contains all mainline moves.</p>
<p>We already know how to visualize a single position, for each side.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">cheviz</span> <span class="kn">import</span> <span class="n">core</span>

<span class="n">ts</span> <span class="o">=</span> <span class="n">core</span><span class="o">.</span><span class="n">makeThreatenedSquares</span><span class="p">(</span><span class="n">board</span><span class="o">=</span><span class="n">board</span><span class="p">)</span>
<span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">ts</span><span class="p">(</span><span class="n">chess</span><span class="o">.</span><span class="n">BLACK</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.image.AxesImage at 0x7fd789013c50&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To advance the board by a move, we push the next move of the mainline onto the board.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">moves_list</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span>
<span class="n">moves_list</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>Move.from_uci(&#39;c2c4&#39;)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice that a repeating push of the same move will corrupt the board configuration. We need to carefully reset the board configuration by either popping the last move from the move stack or resetting the move stack entirely.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">board</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">moves_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">ts</span><span class="p">(</span><span class="n">chess</span><span class="o">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">attack</span><span class="p">)),</span> <span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">ts</span><span class="p">(</span><span class="n">chess</span><span class="o">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">defence</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(&lt;matplotlib.image.AxesImage at 0x7fd788f4d320&gt;,
 &lt;matplotlib.image.AxesImage at 0x7fd788f01cc0&gt;)</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>I am convinced one can generate useful insight into how chess works from just these two metrics alone, once visualized. Notice that we do not care about pieces, at least not directly. We only care about how they affect the position. You could argue that this view is blind to how positions change between moves whereas understanding positional change is the critical skill to master in chess. But that is not entirely true. Much like words in a language, the likelyhood of position A being followed up by B can be expressed as Markov chain. The examples I found seem to focus more on the pieces than on the position directly, like this Youtube video: <a href="https://www.youtube.com/watch?v=63HHmjlh794">https://www.youtube.com/watch?v=63HHmjlh794</a></p>
<p>So while chess moves could be infered I would like to propose another metric instead to cover the connection between positions. Let's add up the matrices of two positions connected by a valid move sequence.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">board</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
<span class="n">board</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">moves_list</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span> <span class="c1"># white moves</span>

<span class="n">A</span> <span class="o">=</span> <span class="n">ts</span><span class="p">(</span><span class="n">chess</span><span class="o">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">attack</span><span class="p">)</span>

<span class="n">board</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">moves_list</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="c1"># black moves</span>
<span class="n">board</span><span class="o">.</span><span class="n">push</span><span class="p">(</span><span class="n">moves_list</span><span class="p">[</span><span class="mi">2</span><span class="p">])</span> <span class="c1"># white moves again</span>

<span class="n">B</span> <span class="o">=</span> <span class="n">ts</span><span class="p">(</span><span class="n">chess</span><span class="o">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">attack</span><span class="p">)</span>

<span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">A</span> <span class="o">+</span> <span class="n">B</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.image.AxesImage at 0x7fd788eaaf98&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Let's call this idea of a metric <strong>positional echo</strong>. There are two obvious ways to measure it:</p>
<p><strong>A)</strong> For a given move sequence and a given side, add up the two positions of the first move of that side and the last move of that side in the move sequence.\
<strong>B)</strong> Add up all positions after moves of a given side in that sequence.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="makeMoveSequencer" class="doc_header"><code>makeMoveSequencer</code><a href="https://github.com/fastai/cheviz/tree/master/cheviz/data.py#L45" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>makeMoveSequencer</code>(<strong><code>moves_list</code></strong>:<code>list</code>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">ms</span> <span class="o">=</span> <span class="n">makeMoveSequencer</span><span class="p">(</span><span class="n">moves_list</span><span class="p">)</span>
<span class="n">move_echo</span> <span class="o">=</span> <span class="nb">sum</span><span class="p">(</span><span class="n">ms</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="o">**</span><span class="mi">5</span><span class="p">),</span> <span class="n">chess</span><span class="o">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">attack</span><span class="p">))</span>
<span class="n">move_echo</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">move_echo</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(array([  5.,   0.,  16.,   2.,   4.,   1.,   0.,   0.,   5.,  10.,  15.,
         15.,   3.,   3.,   2.,   5.,   8.,  19.,  13.,  22.,  16.,  12.,
          6.,  11.,  15.,  21.,  41.,  58.,  37.,  28.,  27.,   0.,  15.,
         35.,  37.,  39.,  43.,  65.,  26.,  80.,  40.,  47.,  83.,  74.,
         92.,  76.,   2.,  56.,   5.,  23.,  64.,  81.,   9.,  11.,  16.,
          2.,  25.,  38.,  36.,  73.,  50., 116.,  14.,  60.]),
 &lt;matplotlib.image.AxesImage at 0x7fd788eedef0&gt;)</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>If we record a game and store the matrices for each move, we can calculate the positional echo after the fact. Parameters as follows:</p>
<ol>
<li><strong>Echo length (int):</strong> the length of the move sequence, or the distance between two positions.</li>
<li><strong>Filtered by side (bool):</strong> whether to apply echo length only to moves from a given side or not.</li>
<li><strong>record all (bool):</strong> whether to record and sum up all positions affected by echo length or only first and last position. Affected by previous parameter.</li>
<li><strong>aggregate function:</strong> what function to apply to the positional matrices. We can simply add up stuff or perhaps we want to look at the positional delta instead. For the API it might make sense to roll the previous boolean parameters into this function parameter. </li>
</ol>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">mr</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
<span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">ms</span><span class="p">(</span><span class="n">mr</span><span class="p">,</span> <span class="n">chess</span><span class="o">.</span><span class="n">WHITE</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">defence</span><span class="p">))),</span> <span class="n">core</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="nb">sum</span><span class="p">(</span><span class="n">ms</span><span class="p">(</span><span class="n">mr</span><span class="p">,</span> <span class="n">chess</span><span class="o">.</span><span class="n">BLACK</span><span class="p">,</span> <span class="n">core</span><span class="o">.</span><span class="n">defence</span><span class="p">)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(&lt;matplotlib.image.AxesImage at 0x7fd788d8c0b8&gt;,
 &lt;matplotlib.image.AxesImage at 0x7fd788d3ea20&gt;)</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAPoAAAECCAYAAADXWsr9AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAADh0RVh0U29mdHdhcmUAbWF0cGxvdGxpYiB2ZXJzaW9uMy4yLjEsIGh0dHA6Ly9tYXRwbG90bGliLm9yZy+j8jraAAAMIElEQVR4nO3dW4xV9RXH8d/PmQEEUeqlaoBoTVsSY1qxBGtJTCtq8BL64gMkmmja4ENrIW3ipS+Nj74Y+9CaGNSaiBpFSRrjNV5ijC0WEK9gvUQrIBdrDYrKdfXhbMwUx84+zP7vOTPr+0lOOHPmsNcaht/89zmz916OCAEY344Y7QYAlEfQgQQIOpAAQQcSIOhAAgQdSKAngm57ge03bb9t+/rCte6wvd32ayXrDKo30/YztjfYft320sL1Jtl+0fbLVb0bS9aravbZfsn2w6VrVfXes/2q7fW21xSuNc32Stsbq+/hOQVrzaq+poO3nbaXNbLxiBjVm6Q+Se9IOk3SBEkvSzq9YL1zJZ0l6bWWvr6TJZ1V3Z8q6Z+Fvz5LOqq6PyBptaQfF/4afyvpHkkPt/Rv+p6k41uqdZekX1b3J0ia1lLdPklbJZ3SxPZ6YUWfK+ntiHg3IvZIuk/Sz0sVi4jnJH1cavtD1PswItZV9z+VtEHS9IL1IiI+qz4cqG7FjoqyPUPSJZKWl6oxWmwfrc7CcLskRcSeiPikpfLzJb0TEe83sbFeCPp0SR8M+niTCgZhNNk+VdJsdVbZknX6bK+XtF3SkxFRst4tkq6VdKBgjUOFpCdsr7W9pGCd0yTtkHRn9dJkue0pBesNtkjSvU1trBeC7iEeG3fH5do+StKDkpZFxM6StSJif0ScKWmGpLm2zyhRx/alkrZHxNoS2/8/5kXEWZIukvQr2+cWqtOvzsu8WyNitqRdkoq+hyRJtidIWijpgaa22QtB3yRp5qCPZ0jaMkq9FGF7QJ2Qr4iIh9qqW+1mPitpQaES8yQttP2eOi+5zrN9d6FaX4mILdWf2yWtUuflXwmbJG0atEe0Up3gl3aRpHURsa2pDfZC0P8h6Xu2v1P9JFsk6a+j3FNjbFud13gbIuLmFuqdYHtadf9ISedL2liiVkTcEBEzIuJUdb5vT0fE5SVqHWR7iu2pB+9LulBSkd+gRMRWSR/YnlU9NF/SGyVqHWKxGtxtlzq7JqMqIvbZ/rWkx9V5p/GOiHi9VD3b90r6qaTjbW+S9IeIuL1UPXVWvSskvVq9bpak30fEI4XqnSzpLtt96vwgvz8iWvm1V0tOlLSq8/NT/ZLuiYjHCta7RtKKahF6V9JVBWvJ9mRJF0i6utHtVm/lAxjHemHXHUBhBB1IgKADCRB0IAGCDiTQU0EvfDjjqNWiHvVGu15PBV1Sm/+YrX7jqEe90azXa0EHUECRA2YmeGJMUvcn+ezVbg1oYuP9NF0rpk7uvt7eXRoYOLwTn/zp593XG8HX9/0fdF9vx7/364Tj+g6r3ltvHdv139mzb5cm9Ld1ItnI6sUXX3b9dw73+/eldmlP7P7aiWJFDoGdpCk62/NLbLon7Jv7o1br9T/d7slhjz++fvgnNeiiBYtarde2A68UOdVgSKvjqSEfZ9cdSICgAwkQdCABgg4kQNCBBAg6kABBBxIg6EACtYLe5sgkAM0bNujVRQb/pM4laE+XtNj26aUbA9CcOit6qyOTADSvTtDTjEwCxqs6J7XUGplUnSi/RJImqfuzuwCUU2dFrzUyKSJui4g5ETGnrVNNAdRTJ+jjemQSkMGwu+5tj0wC0LxaF56o5oSVmhUGoDCOjAMSIOhAAgQdSICgAwkQdCABgg4kQNCBBAg6kECRSS1t23zdT1qtN/2mF1qt17Z5S69utd70P7/dar1dl7X73/4/j3y3tVr7f/P8kI+zogMJEHQgAYIOJEDQgQQIOpAAQQcSIOhAAgQdSICgAwkQdCCBOiOZ7rC93fZrbTQEoHl1VvS/SFpQuA8ABQ0b9Ih4TtLHLfQCoBBeowMJNHa+HrPXgN7V2IrO7DWgd7HrDiRQ59dr90r6m6RZtjfZ/kX5tgA0qc6QxcVtNAKgHHbdgQQIOpAAQQcSIOhAAgQdSICgAwkQdCABgg4kUGQI1d6Tpmjzle3NQxvvs9DaNn1pu7PQ/rXzW63WO2Zru1/fMRdva61WX+we8nFWdCABgg4kQNCBBAg6kABBBxIg6EACBB1IgKADCRB0IAGCDiRQ5+KQM20/Y3uD7ddtL22jMQDNqXOs+z5Jv4uIdbanSlpr+8mIeKNwbwAaUmf22ocRsa66/6mkDZKml24MQHO6eo1u+1RJsyWtLtEMgDJqB932UZIelLQsInYO8fklttfYXrPv811N9ghghGoF3faAOiFfEREPDfWcwbPX+idPabJHACNU5113S7pd0oaIuLl8SwCaVmdFnyfpCknn2V5f3S4u3BeABtWZvfa8JLfQC4BCODIOSICgAwkQdCABgg4kQNCBBAg6kABBBxIg6EACjojGN3q0j42zPb/x7X6Tzde1N+dNkmY++nGr9Q68srHVehi7VsdT2hkff+0AN1Z0IAGCDiRA0IEECDqQAEEHEiDoQAIEHUiAoAMJEHQgAYIOJFDnKrCTbL9o++Vq9tqNbTQGoDl1Zq/tlnReRHxWXd/9eduPRsTfC/cGoCF1rgIbkj6rPhyobs2fCQOgmLqTWvpsr5e0XdKTEcHsNWAMqRX0iNgfEWdKmiFpru0zDn3O4Nlre7W76T4BjEBX77pHxCeSnpW0YIjPfTV7bUATG2oPQBPqvOt+gu1p1f0jJZ0viSshAGNInXfdT5Z0l+0+dX4w3B8RD5dtC0CT6rzr/oqk2S30AqAQjowDEiDoQAIEHUiAoAMJEHQgAYIOJEDQgQQIOpBAnSPjuuaBfvUff2KJTQ9p+k0vtFZLkg60Wg0YOVZ0IAGCDiRA0IEECDqQAEEHEiDoQAIEHUiAoAMJEHQgAYIOJFA76NUQh5dsc2FIYIzpZkVfKmlDqUYAlFN3JNMMSZdIWl62HQAl1F3Rb5F0rThxCxiT6kxquVTS9ohYO8zzvpq9tufAF401CGDk6qzo8yQttP2epPsknWf77kOfNHj22oQjjmy4TQAjMWzQI+KGiJgREadKWiTp6Yi4vHhnABrD79GBBLq6lFREPKvO2GQAYwgrOpAAQQcSIOhAAgQdSICgAwkQdCABgg4kQNCBBIrMXou9+7Rv67YSm+4J/Se1N1dO0rj+t0Q7WNGBBAg6kABBBxIg6EACBB1IgKADCRB0IAGCDiRA0IEECDqQQK1DYKtLPX8qab+kfRExp2RTAJrVzbHuP4uIj4p1AqAYdt2BBOoGPSQ9YXut7SUlGwLQvLq77vMiYovtb0t60vbGiHhu8BOqHwBLJGmSJjfcJoCRqLWiR8SW6s/tklZJmjvEc76avTagic12CWBE6kxTnWJ76sH7ki6U9FrpxgA0p86u+4mSVtk++Px7IuKxol0BaNSwQY+IdyX9sIVeABTCr9eABAg6kABBBxIg6EACBB1IgKADCRB0IAGCDiRQZPbaeMcsNIw1rOhAAgQdSICgAwkQdCABgg4kQNCBBAg6kABBBxIg6EACBB1IoFbQbU+zvdL2RtsbbJ9TujEAzal7rPsfJT0WEZfZniAxoQEYS4YNuu2jJZ0r6UpJiog9kvaUbQtAk+rsup8maYekO22/ZHt5Ncjhf9heYnuN7TV7tbvxRgEcvjpB75d0lqRbI2K2pF2Srj/0SYxkAnpXnaBvkrQpIlZXH69UJ/gAxohhgx4RWyV9YHtW9dB8SW8U7QpAo+q+636NpBXVO+7vSrqqXEsAmlYr6BGxXtKcwr0AKIQj44AECDqQAEEHEiDoQAIEHUiAoAMJEHQgAYIOJEDQgQQIOpAAQQcSIOhAAgQdSICgAwkQdCABgg4kQNCBBAg6kMCwQbc9y/b6Qbedtpe10RyAZgx7zbiIeFPSmZJku0/SZkmrCvcFoEHd7rrPl/RORLxfohkAZXQb9EWS7i3RCIByage9uqb7QkkPfMPnmb0G9KhuVvSLJK2LiG1DfZLZa0Dv6iboi8VuOzAm1Qq67cmSLpD0UNl2AJRQdyTT55KOK9wLgEI4Mg5IgKADCRB0IAGCDiRA0IEECDqQAEEHEiDoQAIEHUjAEdH8Ru0dkg7nnPXjJX3UcDu9UIt61Gur3ikRccKhDxYJ+uGyvSYi5oy3WtSj3mjXY9cdSICgAwn0WtBvG6e1qEe9Ua3XU6/RAZTRays6gAIIOpAAQQcSIOhAAgQdSOC/29e0Fjn66e0AAAAASUVORK5CYII=
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Notice how we use the same range object as argument for either side. In chess there are half moves and full moves. The notation <code>1. e4 c5</code> denotes a full move, consisting of two half moves, the white half move <code>1. e4</code> and the black response <code>1. ... c5</code>. A game with 10 full moves has, in the trivial case, 10 white half moves and 10 black half moves. Our range object uses half moves, but there are ugly corner cases. Consider a tactics where black starts to move: <code>1. ... Qe1+</code>, or a game that ends in the 21. full move, with white checkmating black: <code>21. Rh8++</code>. In either case, we're starting to lose a half move here and there. We try to ignore these problems in our data pipeline as much as possible, which is why our range notation of half moves leaves the effect of those corner cases for the API user to decide. To us, the range notation represents a slice of the total moves list (one can argue that <code>range</code> is perhaps misused here).</p>
<p>I feel like this is one of the typical cases where as a data scientist you choose to simplify data despite deeper domain knowledge available to you. This can make data more robust for later analysis as the API becomes simpler to use, to the point where a data scientist could completely ignore domain knowledge. Just imagine for a moment that you work in a larger team and got stuck generating plausible insight. In your despair you hand off the problem to the brilliant mathematician in your team who naturally has no domain expertise at all. Yet that guy will effortlessly find the missing link because they could look at the generated data and instrument it without special knowledge about corner cases and such. It is therefore useful to keep this kind of trade-off in regard to data simplification in mind.</p>

</div>
</div>
</div>
</div>
 

